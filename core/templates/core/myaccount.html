{% extends "base.html" %}

{% load static %}

{% block style %}  
<style>
.chat:hover{
  cursor: pointer;
}
.row2{
  font-size:14px;
  margin-top:0.4rem;
  margin-bottom:0.4rem;
}

</style>
{% endblock %}

{% block content %}
<div class="container" style="margin-top:50px;">
  <div class="card">
    <div class="card-body">
      <div class="row">
        {% if account.registered %}
        <div class="col-xl-2"  style="padding-top:10px;">
          <img src="{% get_media_prefix %}{{ account.photo }}" height="170" width="170">
        </div> 
        <div class="col-xl-10">
          <div class="row row2">
            <div class="col-md-2">Public&nbsp;Key:</div>
            <div class="col-md-10">{{ account.public_key }}</div>
          </div>
          <div class="row row2">
            <div class="col-md-2">Name:</div>
            <div class="col-md-10">{{ account.name }}</div>
          </div>
          <div class="row row2">
            <div class="col-md-2">Balance:</div>
            <div class="col-md-10">{{ account.balance }}</div>
          </div>
          <div class="row row2">
            <div class="col-md-2">Registered:</div>
            <div class="col-md-10">{{ account.registered }}</div>
          </div>
          <div class="row row2">
            <div class="col-md-2">Verified:</div>
            <div class="col-md-10">{{ account.verified }}</div>
          </div>
          <div class="row row2">
            <div class="col-md-2">Sequence:</div>
            <div class="col-md-10">{{ account.sequence_next }}</div>
          </div>
          <div class="row row2">
            <div class="col-md-2">Photo&nbsp;hash:</div>
            <div class="col-md-10 overflow" data-container="body" data-toggle="popover" data-placement="bottom" data-content='{{ account.photo_hash }}'>{{ account.photo_hash }}</div>
          </div>
          <div class="row row2">
            <div class="col-md-2">Txn&nbsp;history:</div>
            <div class="col-md-10"><a style="color:#28bda4" href="/myaccount/history">View all transactions</a></div>
          </div>
          {% if account.committed %}
          <div class="row row2">
            <div class="col-md-2">Commitment:</div>
            <div class="col-md-7">{{ account.committed_hash }}</div>
            {% if time_status == 'early' %}
            <div class="col-md-3 text-muted">Reveal&nbsp;value in {{timer}}</div>
            {% elif time_status == 'ready'  %}
            <div class="col-md-3 text-muted"><a style="color:#28bda4" href="/reveal">Reveal&nbsp;value</a>. Time left {{timer}}</div>
            {% else %}
            <div class="col-md-3 text-muted">Too late to reveal&nbsp;value</a></div>
            {% endif %}
          </div>
          {% endif %}
        </div>
        {% else %}
        <div class="col-xl-2" >
          <!-- Matthieu James [GPL (http://www.gnu.org/licenses/gpl.html)] -->
          <img src='https://upload.wikimedia.org/wikipedia/commons/f/fd/Faenza-avatar-default-symbolic.svg' height="170" width="170" >
        </div> 
        <div class="col-xl-10">
         
        </div>
        {% endif %}
      </div>
    </div>
  </div>


<div class="row">
  <div class="col-md-8">
    <div class="card" style="height: 100%;">
      <div class="card-body">
        <h6 style="font-family: 'Garamond';text-align: center;margin-bottom: 15px;">Links</h6>
        <div class="table-responsive table-borderless">
          <table class="table table-sm">
      <!--       <colgroup>
              <col style="width:10%">
              <col style="width:15%">
              <col style="width:55%">
              <col style="width:10%">
              <col style="width:10%">
            </colgroup>  -->
          <thead>
            <tr class="custom_centered">
              <th style="font-size:11px;">Photo</th>
              <th style="font-size:11px;">Name</th>
              <th style="font-size:11px;">Their Vote</th>
              <th style="font-size:11px;">Your Vote</th>
              <th style="font-size:11px;"></th>
            </tr>
          </thead> 
            <tbody>
              {% for arrow in arrows %}
              {% if arrow %}
              <tr>
                <td style="vertical-align: middle;">
                  <img src="{% get_media_prefix %}{{ arrow.source.photo }}" height="70" width="70">
                </td>
                <td style="vertical-align: middle;font-size:14px;">
                  <a class="textlink" href="/accounts/{{ arrow.source.public_key }}/">{{arrow.source.name}}</a>
                </td>
                <td style="vertical-align: middle;font-size:14px;">{{ arrow.status }}</td>
                <td style="vertical-align: middle;font-size:14px;">{{ arrow.opposite.status }}</td>
<!--                 <td style="vertical-align: middle;font-size:14px;">
                  {% if arrow.status == 'Trust' %}
                  <span class="text-success">Trust</span>
                  {% elif arrow.status == 'Distrust' %}
                  <span class="text-danger">Distrust</span>
                  {% else %}
                  <span class="text-secondary">Neutral</span>
                  {% endif %}
                </td>
                <td style="vertical-align: middle;font-size:14px;">
                  {% if arrow.opposite.status == 'Trust' %}
                  <span class="text-success">Trust</span>
                  {% elif arrow.opposite.status == 'Distrust' %}
                  <span class="text-danger">Distrust</span>
                  {% else %}
                  <span class="text-secondary">Neutral</span>
                  {% endif %}
                </td> -->
                <td style="vertical-align: middle;font-size:14px;">
                  <a class="textlink" href="/changevote/?target={{ arrow.source.public_key }}">Change your vote</a>
                </td>
                <td style="vertical-align: middle;font-size:14px;">
                <div id="{{ arrow.source.public_key }}" class="chat">
                  <img src='https://upload.wikimedia.org/wikipedia/commons/3/39/Internet-group-chat.svg' height="25" width="25">
                </div>
                </td>

                <!--                   <td style="vertical-align: middle;font-size:14px;">{% if account.verified %}<span class="text-success">Verified</span>{% else %}<span class="text-secondary">Not&nbsp;Verified</span>{% endif %}</td> -->
              </tr>
              {% endif %}
              {% endfor %}
            </tbody>
          </table>
          <br>use pagination???
          <br>cdvd
          <br>cdvd
          <br>cdvd
          <br>cdvd
          <br>cdvd
          <br>cdvd
          <br>cdvd
          <br>cdvd
          <br>cdvd
          <br>cdvd
          <br>cdvd
          <br>cdvd
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-4">
    <div class="card" style="height: 100%;">
      <div class="card-body">
        <h6 style="font-family: 'Garamond'; text-align: center">Chat</h6>
        <div id="chatbox">
        nfgn<br>nfgn<br>nfgn<br>nfgn<br>nfgn<br>nfgn<br>
        </div>
      </div>
    </div>
  </div>

</div>
   

</div>
{% endblock %}

{% block script %}
<script type="text/javascript">
$(".chat").click(function(){
  $('#chatbox').text($(this).attr('id'));
});
</script>

{% endblock script %} 